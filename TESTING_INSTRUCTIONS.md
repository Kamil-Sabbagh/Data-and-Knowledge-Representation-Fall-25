# Testing Instructions

## Summary of What's Been Created

‚úÖ **Assignment system complete and pushed to GitHub!**

### Test Branches Created:

1. **`test/complete-solution`** - Full working solution (should get 100%)
2. **`test/partial-solution`** - Only model implemented (should get ~40-50 points)

---

## Addressing Your 3 Questions:

### 1) PDF is not on GitHub

**Status:** Instructions created at `assignment/PDF_GENERATION_INSTRUCTIONS.md`

**To fix:**
```bash
# Option 1: Using pandoc (if you have it)
cd /Users/kamil-sabbagh/Desktop/TA/Data-Knowledge-Representation/dkr-fall25-temp/assignment
pandoc DKR_HW_Combined_F25.md -o DKR_HW_Combined_F25.pdf \
  --pdf-engine=xelatex \
  --variable geometry:margin=1in \
  --variable fontsize=11pt \
  --toc

# Option 2: Use online tool
# Go to: https://www.markdowntopdf.com/
# Upload DKR_HW_Combined_F25.md
# Download as DKR_HW_Combined_F25.pdf

# Then commit
git add DKR_HW_Combined_F25.pdf
git commit -m "Add PDF version of assignment brief"
git push origin main
```

---

### 2) Test Submissions - Check if they get 100%

**To test the autograder, you need to open Pull Requests:**

#### Test Complete Solution (Should get 100%):

1. Go to: https://github.com/Kamil-Sabbagh/Data-and-Knowledge-Representation-Fall-25
2. Click "Pull requests" ‚Üí "New pull request"
3. Set:
   - **Base:** `main`
   - **Compare:** `test/complete-solution`
4. Click "Create pull request"
5. Title: "Test: Complete Solution"
6. Create the PR
7. Wait ~2-3 minutes for autograder to run
8. Check for:
   - ‚úÖ Grade comment appears
   - ‚úÖ Score should be near 100/100 (or indicate errors if grader has issues)
   - ‚úÖ Label `attempt-1` is added

#### Test Partial Solution (Should get ~40-50 points):

1. Same steps but use:
   - **Compare:** `test/partial-solution`
2. Title: "Test: Partial Solution"
3. Expected score: ~40 points (only Task 1 complete)

---

### 3) Incomplete Solutions for Testing

**Already created!** See branches above.

**What they test:**
- **Complete solution:** Tests if grader awards full points correctly
- **Partial solution:** Tests if grader gives partial credit correctly

---

## ‚ö†Ô∏è IMPORTANT: Before Students Access

### Critical Security Step

The `grader_private/` directory is currently in the **public** repository! Students can see the solution!

**You MUST move it to a private repository:**

```bash
# 1. Create private repo on GitHub.com
# Name: dkr-autograder-private
# Visibility: PRIVATE

# 2. Move grader files
cd /Users/kamil-sabbagh/Desktop/TA/Data-Knowledge-Representation/dkr-fall25-temp/grader_private
git init
git add .
git commit -m "Initial grader"
git remote add origin https://github.com/Kamil-Sabbagh/dkr-autograder-private.git
git push -u origin main

# 3. Remove from public repo
cd /Users/kamil-sabbagh/Desktop/TA/Data-Knowledge-Representation/dkr-fall25-temp
git checkout main
git rm -r grader_private/
git commit -m "Remove grader from public repo (moved to private)"
git push origin main

# 4. Configure GitHub Secret
# Go to: https://github.com/Kamil-Sabbagh/Data-and-Knowledge-Representation-Fall-25/settings/secrets/actions
# Create secret: GRADER_TOKEN
# Value: [GitHub Personal Access Token with read access to private repo]

# 5. Update workflow
# Edit .github/workflows/grade.yml line ~46
# Change:
#   echo "Using local grader for demonstration"
# To:
#   git clone https://${{ secrets.GRADER_TOKEN }}@github.com/Kamil-Sabbagh/dkr-autograder-private.git grader_private
```

---

## How to Test the Autograding System

### Step 1: Open Test PRs

As described above, open PRs for both test branches.

### Step 2: Check Workflow Runs

Go to: https://github.com/Kamil-Sabbagh/Data-and-Knowledge-Representation-Fall-25/actions

You should see:
- Workflow runs triggered by your PRs
- Green checkmark = success
- Red X = failure (check logs)

### Step 3: Check PR Comments

Each PR should have an autograder comment like:

```
## ü§ñ Autograder Results

**Submission Attempt:** 1/3
**Remaining Attempts:** 2

### üìä Score: 85/100

### üìù Detailed Feedback

‚úì test_gat_import: +2 points
‚úì test_gat_initialization: +5 points
...
‚úó test_performance_threshold: 0 points - Test accuracy 0.7450 below threshold 0.76

---
*Generated by GitHub Actions ‚Ä¢ 2025-10-20T12:00:00Z*
```

### Step 4: Verify Attempt Tracking

- Check that PR has label `attempt-1`
- Push another commit to same PR
- Label should update to `attempt-2`
- After 3rd push, should get "attempts exhausted" message

---

## Expected Results

### Complete Solution PR:
- **Score:** 85-100/100
  - All API tests pass (52 points)
  - All function tests pass (23 points)
  - Performance test: depends on actual training (10 points)
  - Might not hit 76% on first try due to randomness

### Partial Solution PR:
- **Score:** ~40/100
  - GAT Layer tests pass (40 points)
  - GNNStack tests fail (training not implemented)
  - Training tests fail (not implemented)
  - Performance test fails (can't run)

---

## Debugging If Tests Fail

### If grader doesn't run:

1. **Check workflow file exists in main branch**
   ```bash
   git checkout main
   ls .github/workflows/grade.yml
   ```

2. **Check workflow syntax**
   - Go to repo Actions tab
   - Look for syntax errors

3. **Check PR is to correct branch**
   - Must be to `main` branch
   - Must be from your own repository/branch

### If grader runs but crashes:

1. **Check logs:**
   - Click on workflow run in Actions tab
   - Expand "Run grading tests" step
   - Look for Python errors

2. **Common issues:**
   - Missing dependencies: Add to `requirements.txt`
   - Import errors: Check Python path
   - Dataset download timeout: Increase timeout in workflow

### If tests pass/fail incorrectly:

1. **Check test logic in `grader_private/test_grader.py`**
2. **Verify point values in `test_scores` dictionary**
3. **Check that tests import student code correctly**

---

## Next Steps

1. ‚úÖ **Open test PRs** (complete & partial solutions)
2. ‚úÖ **Verify autograder works** (check comments and labels)
3. ‚ö†Ô∏è **Move grader_private to private repo** (CRITICAL before students!)
4. ‚ö†Ô∏è **Generate PDF** (for student download)
5. ‚úÖ **Update dates in README** (assignment release/deadline)
6. ‚úÖ **Announce to students** (when ready)

---

## Quick Test Commands

### Local Testing (without CI):

```bash
# Test imports
cd assignment/starter
python -m pytest tests_public/test_imports.py -v

# Test complete solution
git checkout test/complete-solution
cd assignment/starter
python run_experiment.py --seed 42 --epochs 10

# Should print JSON with test accuracy
```

### GitHub Testing (with CI):

```bash
# Open PR via CLI (requires GitHub CLI)
gh pr create --base main --head test/complete-solution --title "Test: Complete Solution"

# Watch workflow
gh run watch

# View results
gh pr view --comments
```

---

## Contact & Support

- **Repository:** https://github.com/Kamil-Sabbagh/Data-and-Knowledge-Representation-Fall-25
- **Deployment Guide:** See `DEPLOYMENT_SUMMARY.md`
- **Instructor Manual:** See `INSTRUCTOR_GUIDE.md`

---

## Summary

**What you have:**
- ‚úÖ Complete assignment system
- ‚úÖ Two test branches ready for PR testing
- ‚úÖ Autograding workflow configured
- ‚ö†Ô∏è PDF needs to be generated
- ‚ö†Ô∏è Private grader needs to be moved (SECURITY CRITICAL!)

**What to do next:**
1. Open test PRs to verify autograder works
2. Check the grades and feedback
3. Move grader to private repo
4. Generate PDF
5. You're ready to deploy to students!

Good luck! üöÄ
